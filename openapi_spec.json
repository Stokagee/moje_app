{"openapi":"3.1.0","info":{"title":"Food Delivery API","description":"\n# Food Delivery API - Systém pro správu rozvozové služby\n\nToto API poskytuje kompletní řešení pro správu **kurýrů**, **objednávek** a **dispečinku**\nrozvozové služby jídla.\n\n## Hlavní funkce\n\n### Kurýři (`/couriers`)\n- Vytváření, úprava a mazání kurýrů\n- Správa GPS polohy v reálném čase\n- Stavy kurýrů: **available** (volný), **busy** (zaneprázdněný), **offline** (nedostupný)\n- Systém tagů pro specializace (např. `bike`, `car`, `vip`, `fragile_ok`, `fast`)\n\n### Objednávky (`/orders`)\n- Kompletní životní cyklus objednávky\n- Stavy: **CREATED** → **SEARCHING** → **ASSIGNED** → **PICKED** → **DELIVERED**\n- Podpora VIP objednávek s prioritním zpracováním\n- Požadavky na tagy kurýra (např. objednávka vyžadující `fragile_ok`)\n\n### Dispečink (`/dispatch`)\n- **Automatický dispatch**: Algoritmus vybírá nejbližšího vhodného kurýra\n- **Manuální dispatch**: Operátor může přiřadit konkrétního kurýra\n- Fázový algoritmus: 2km → 5km radius\n- VIP objednávky preferují kurýry s tagem `vip`\n- Historie všech přiřazení v logu\n\n## Stavový diagram objednávky\n\n```\nCREATED ──────────────────────────────────────┐\n    │                                          │\n    ▼                                          │\nSEARCHING (hledá se kurýr)                     │\n    │                                          │\n    ▼                                          ▼\nASSIGNED (kurýr přijal) ──────────────────► CANCELLED\n    │                                          ▲\n    ▼                                          │\nPICKED (vyzvednuto) ───────────────────────────┤\n    │                                          │\n    ▼                                          │\nDELIVERED (doručeno)                           │\n```\n\n## Stavový diagram kurýra\n\n```\noffline ◄───────────────────────────────────────┐\n    │                                            │\n    ▼                                            │\navailable (čeká na objednávku) ◄────────────────┤\n    │                                            │\n    ▼ (dispatch)                                 │ (deliver/cancel)\nbusy (doručuje) ─────────────────────────────────┘\n```\n\n## Algoritmus automatického dispatchnutí\n\n1. Najde všechny **available** kurýry s platnou GPS polohou\n2. Odfiltruje kurýry, kteří nemají požadované tagy\n3. Pro VIP objednávky preferuje kurýry s tagem `vip`\n4. **Fáze 1**: Hledá kurýry do 2 km od místa vyzvednutí\n5. **Fáze 2**: Pokud nikdo není, rozšíří na 5 km\n6. Vybere nejbližšího kurýra podle GPS vzdálenosti\n7. Přiřadí kurýra a změní jeho stav na `busy`\n\n## Příklady použití\n\n### Kompletní workflow doručení\n1. `POST /couriers` - Vytvoř kurýra\n2. `PATCH /couriers/{id}/status` - Nastav `available`\n3. `PATCH /couriers/{id}/location` - Aktualizuj GPS\n4. `POST /orders` - Vytvoř objednávku\n5. `POST /dispatch/auto/{order_id}` - Přiřaď kurýra\n6. `POST /orders/{id}/pickup` - Kurýr vyzvednul\n7. `POST /orders/{id}/deliver` - Kurýr doručil\n\n---\n**Kontakt**: support@fooddelivery.cz | **Verze**: 2.0.0\n","contact":{"name":"Food Delivery Support","email":"support@fooddelivery.cz"},"license":{"name":"MIT"},"version":"2.0.0"},"paths":{"/api/v1/form/":{"post":{"tags":["Formuláře"],"summary":"Vytvoření nového formuláře","description":"Vytvoří nový záznam formuláře v databázi.\n\n**Mini hra (Easter Egg):**\nPokud křestní jméno nebo příjmení odpovídá tajnému tokenu\n(neo, trinity, morpheus, jan, pavla, matrix), vrátí se `easter_egg=true`\na `secret_message` s gratulací.\n\n**Validace:**\n- Email musí být unikátní v systému\n- Pohlaví: male, female, other\n- Telefon: 9-15 znaků","operationId":"create_form_data_endpoint_api_v1_form__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FormDataCreate","description":"Data nového formuláře"}}}},"responses":{"201":{"description":"Formulář úspěšně vytvořen","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FormDataResponse"}}}},"400":{"description":"Email již existuje v systému","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validační chyba (neplatná data)"},"500":{"description":"Interní chyba serveru","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"get":{"tags":["Formuláře"],"summary":"Seznam všech formulářů","description":"Vrátí stránkovaný seznam všech formulářů v databázi.\n\n**Stránkování:**\n- `skip`: Počet záznamů k přeskočení (výchozí: 0)\n- `limit`: Maximální počet vrácených záznamů (výchozí: 100, max: 1000)\n\n**Příklad:** `GET /form/?skip=10&limit=20` vrátí záznamy 11-30.","operationId":"read_form_data_api_v1_form__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Počet záznamů k přeskočení (pro stránkování)","default":0,"title":"Skip"},"description":"Počet záznamů k přeskočení (pro stránkování)","example":0},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximální počet vrácených záznamů","default":100,"title":"Limit"},"description":"Maximální počet vrácených záznamů","example":100}],"responses":{"200":{"description":"Seznam formulářů","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FormData"},"title":"Response 200 Read Form Data Api V1 Form  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/form/{form_data_id}":{"get":{"tags":["Formuláře"],"summary":"Detail formuláře","description":"Vrátí detail jednoho konkrétního formuláře podle jeho ID.\n\nPokud formulář s daným ID neexistuje, vrátí se chyba 404.","operationId":"read_single_form_data_api_v1_form__form_data_id__get","parameters":[{"name":"form_data_id","in":"path","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"description":"Unikátní ID formuláře","title":"Form Data Id"},"description":"Unikátní ID formuláře","example":1}],"responses":{"200":{"description":"Detail formuláře","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FormData"}}}},"404":{"description":"Formulář s daným ID nenalezen","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Formuláře"],"summary":"Smazání formuláře","description":"Smaže formulář podle ID včetně všech souvisejících dat (přílohy, instrukce).\n\n**Kaskádové mazání:** Automaticky se smažou i všechny přílohy a instrukce\npřiřazené k tomuto formuláři.\n\nPokud formulář s daným ID neexistuje, vrátí se chyba 404.","operationId":"delete_form_data_endpoint_api_v1_form__form_data_id__delete","parameters":[{"name":"form_data_id","in":"path","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"description":"ID formuláře ke smazání","title":"Form Data Id"},"description":"ID formuláře ke smazání","example":1}],"responses":{"200":{"description":"Formulář úspěšně smazán","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteResponse"}}}},"404":{"description":"Formulář s daným ID nenalezen","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Chyba při mazání","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/form/evaluate-name":{"post":{"tags":["Mini hra"],"summary":"Vyhodnocení tajného jména (Mini hra)","description":"Zkontroluje, zda zadaný text odpovídá některému z tajných tokenů.\n\n**Tajné tokeny:** neo, trinity, morpheus, jan, pavla, matrix\n\n**Pravidla:**\n- Vyhodnocení je case-insensitive (Neo = neo = NEO)\n- Ignoruje bílé znaky na začátku a konci\n- Neprovádí žádnou práci s databází\n\n**Odpověď:**\n- `matched=true` + `message` při shodě\n- `matched=false` + `message=null` bez shody","operationId":"evaluate_name_endpoint_api_v1_form_evaluate_name_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NameInput","description":"Text k ověření proti tajným tokenům"}}},"required":true},"responses":{"200":{"description":"Výsledek vyhodnocení","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GameResponse"},"examples":{"shoda":{"summary":"Tajné jméno nalezeno","value":{"matched":true,"message":"Tajemství odhaleno: 'neo'! Máš oko sokola."}},"bez_shody":{"summary":"Tajné jméno nenalezeno","value":{"matched":false}}}}}},"500":{"description":"Chyba při vyhodnocení","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/form/{form_id}/attachment":{"post":{"tags":["Přílohy"],"summary":"Nahrání přílohy k formuláři","description":"Nahraje soubor (přílohu) k existujícímu formuláři.\n\n**Omezení:**\n- Maximální velikost souboru: **1 MB** (po dekódování z base64)\n- Povolené MIME typy: `application/pdf`, `text/plain`\n\n**Formát dat:**\nData souboru se odesílají jako base64 string v JSON těle požadavku.\n\n**Instrukce:**\nVolitelně lze přidat textové instrukce k příloze.","operationId":"create_attachment_endpoint_api_v1_form__form_id__attachment_post","parameters":[{"name":"form_id","in":"path","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"description":"ID formuláře, ke kterému se přiloha přidává","title":"Form Id"},"description":"ID formuláře, ke kterému se přiloha přidává","example":1}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttachmentCreate","description":"Data přílohy (soubor v base64)"}}}},"responses":{"201":{"description":"Příloha úspěšně nahrána","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttachmentOut"}}}},"400":{"description":"Neplatný soubor (špatný formát, velikost, MIME typ)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Formulář s daným ID nenalezen","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Chyba při ukládání přílohy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/form/{form_id}/attachments":{"get":{"tags":["Přílohy"],"summary":"Seznam příloh formuláře","description":"Vrátí seznam všech příloh přiřazených k danému formuláři.\n\n**Poznámka:** Vrací pouze metadata příloh (ID, název, typ), ne samotný obsah souborů.","operationId":"list_attachments_endpoint_api_v1_form__form_id__attachments_get","parameters":[{"name":"form_id","in":"path","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"description":"ID formuláře","title":"Form Id"},"description":"ID formuláře","example":1}],"responses":{"200":{"description":"Seznam příloh","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AttachmentOut"},"title":"Response 200 List Attachments Endpoint Api V1 Form  Form Id  Attachments Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/form/{form_id}/instructions":{"put":{"tags":["Instrukce"],"summary":"Vytvoření nebo aktualizace instrukcí","description":"Vytvoří nebo aktualizuje instrukce k formuláři (upsert operace).\n\n**Chování:**\n- Pokud instrukce pro daný formulář **neexistují**, vytvoří se nové\n- Pokud instrukce **existují**, přepíší se novým textem\n\nKaždý formulář může mít maximálně jedny instrukce (vztah 1:1).","operationId":"upsert_instructions_endpoint_api_v1_form__form_id__instructions_put","parameters":[{"name":"form_id","in":"path","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"description":"ID formuláře","title":"Form Id"},"description":"ID formuláře","example":1}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructionCreate","description":"Text instrukcí"}}}},"responses":{"200":{"description":"Instrukce vytvořeny/aktualizovány","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructionOut"}}}},"404":{"description":"Formulář s daným ID nenalezen","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Chyba při ukládání instrukcí","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Instrukce"],"summary":"Získání instrukcí formuláře","description":"Vrátí instrukce přiřazené k formuláři.\n\n**Návratové hodnoty:**\n- Objekt instrukcí, pokud existují\n- `null`, pokud formulář nemá žádné instrukce","operationId":"get_instructions_endpoint_api_v1_form__form_id__instructions_get","parameters":[{"name":"form_id","in":"path","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"description":"ID formuláře","title":"Form Id"},"description":"ID formuláře","example":1}],"responses":{"200":{"description":"Instrukce formuláře (nebo null)","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/InstructionOut"},{"type":"null"}],"title":"Response Get Instructions Endpoint Api V1 Form  Form Id  Instructions Get","$ref":"#/components/schemas/InstructionOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/couriers/":{"post":{"tags":["couriers","couriers"],"summary":"Vytvořit nového kurýra","description":"Vytvoří nového kurýra v systému.\n\n## Co se stane\n1. Ověří se, že e-mail ještě není v systému použit\n2. Vytvoří se nový záznam kurýra\n3. Kurýr je automaticky ve stavu `offline` bez GPS polohy\n\n## Další kroky po vytvoření\n- Nastavte GPS polohu: `PATCH /couriers/{id}/location`\n- Aktivujte kurýra: `PATCH /couriers/{id}/status` s hodnotou `available`\n\n## Chyby\n- **400 Bad Request** - E-mail již existuje v systému\n- **422 Unprocessable Entity** - Neplatný formát dat (chybí povinná pole, špatný e-mail)","operationId":"create_courier_api_v1_couriers__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierCreate"}}}},"responses":{"201":{"description":"Kurýr úspěšně vytvořen","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierResponse"},"example":{"id":1,"name":"Jan Novák","phone":"+420777123456","email":"jan.novak@example.cz","tags":["bike","vip"],"status":"offline","created_at":"2024-01-15T10:30:00"}}}},"400":{"description":"E-mail již existuje","content":{"application/json":{"example":{"detail":"Courier with this email already exists"}}}},"422":{"description":"Neplatný formát dat","content":{"application/json":{"example":{"detail":[{"loc":["body","email"],"msg":"value is not a valid email address","type":"value_error.email"}]}}}}}},"get":{"tags":["couriers","couriers"],"summary":"Získat seznam všech kurýrů","description":"Vrátí stránkovaný seznam všech kurýrů v systému.\n\n## Parametry\n- `skip` - Počet záznamů k přeskočení (pro stránkování)\n- `limit` - Maximální počet vrácených záznamů (max 1000)\n\n## Příklad stránkování\n- První stránka (10 záznamů): `?skip=0&limit=10`\n- Druhá stránka: `?skip=10&limit=10`\n- Třetí stránka: `?skip=20&limit=10`\n\n## Řazení\nKurýři jsou řazeni podle data vytvoření (nejnovější první).","operationId":"get_couriers_api_v1_couriers__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Počet záznamů k přeskočení (offset pro stránkování)","default":0,"title":"Skip"},"description":"Počet záznamů k přeskočení (offset pro stránkování)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximální počet vrácených záznamů","default":100,"title":"Limit"},"description":"Maximální počet vrácených záznamů"}],"responses":{"200":{"description":"Seznam kurýrů","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CourierResponse"},"title":"Response Get Couriers Api V1 Couriers  Get"},"example":[{"id":1,"name":"Jan Novák","phone":"+420777123456","email":"jan.novak@example.cz","tags":["bike","vip"],"lat":50.0755,"lng":14.4378,"status":"available","created_at":"2024-01-15T10:30:00","updated_at":"2024-01-15T14:45:00"}]}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/couriers/available":{"get":{"tags":["couriers","couriers"],"summary":"Získat seznam dostupných kurýrů","description":"Vrátí seznam všech kurýrů, kteří jsou právě **dostupní** pro přijetí objednávky.\n\n## Kritéria \"dostupného\" kurýra\n- Stav: `available`\n- Má nastavenou GPS polohu (lat a lng nejsou null)\n\n## Využití\n- Operátor vidí, koho může přiřadit k objednávce\n- Dashboard zobrazující aktivní kurýry\n- Mobilní aplikace pro sledování flotily","operationId":"get_available_couriers_api_v1_couriers_available_get","responses":{"200":{"description":"Seznam dostupných kurýrů","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CourierResponse"},"type":"array","title":"Response Get Available Couriers Api V1 Couriers Available Get"},"example":[{"id":1,"name":"Jan Novák","phone":"+420777123456","email":"jan.novak@example.cz","tags":["bike","vip"],"lat":50.0755,"lng":14.4378,"status":"available","created_at":"2024-01-15T10:30:00","updated_at":"2024-01-15T14:45:00"}]}}}}}},"/api/v1/couriers/{courier_id}":{"get":{"tags":["couriers","couriers"],"summary":"Získat detail kurýra","description":"Vrátí kompletní informace o jednom kurýrovi podle jeho ID.\n\n## Vrácené informace\n- Základní údaje (jméno, telefon, e-mail)\n- Aktuální GPS poloha\n- Aktuální stav (offline/available/busy)\n- Seznam tagů/specializací\n- Časové údaje (vytvořeno, aktualizováno)\n\n## Chyby\n- **404 Not Found** - Kurýr s daným ID neexistuje","operationId":"get_courier_api_v1_couriers__courier_id__get","parameters":[{"name":"courier_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"Unikátní identifikátor kurýra","title":"Courier Id"},"description":"Unikátní identifikátor kurýra"}],"responses":{"200":{"description":"Detail kurýra","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierResponse"}}}},"404":{"description":"Kurýr nenalezen","content":{"application/json":{"example":{"detail":"Courier not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["couriers","couriers"],"summary":"Aktualizovat údaje kurýra","description":"Aktualizuje základní údaje kurýra (jméno, telefon, tagy).\n\n## Co lze změnit\n- `name` - Jméno kurýra\n- `phone` - Telefonní číslo\n- `tags` - Seznam tagů (nahradí stávající seznam)\n\n## Co NELZE změnit\n- `email` - E-mail je unikátní identifikátor a nelze ho měnit\n\n## Poznámka\nPro změnu lokace použijte `PATCH /couriers/{id}/location`.\nPro změnu stavu použijte `PATCH /couriers/{id}/status`.\n\n## Chyby\n- **404 Not Found** - Kurýr neexistuje","operationId":"update_courier_api_v1_couriers__courier_id__put","parameters":[{"name":"courier_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID kurýra","title":"Courier Id"},"description":"ID kurýra"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierUpdate"}}}},"responses":{"200":{"description":"Kurýr úspěšně aktualizován","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierResponse"}}}},"404":{"description":"Kurýr nenalezen","content":{"application/json":{"example":{"detail":"Courier not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["couriers","couriers"],"summary":"Smazat kurýra","description":"Trvale smaže kurýra ze systému.\n\n## Upozornění\n- Akce je **nevratná**!\n- Kurýr by neměl mít aktivní objednávky (stav `busy`)\n- Historie objednávek zůstane zachována\n\n## Doporučení\nMísto mazání zvažte nastavení stavu na `offline` pro deaktivaci.\n\n## Chyby\n- **404 Not Found** - Kurýr neexistuje","operationId":"delete_courier_api_v1_couriers__courier_id__delete","parameters":[{"name":"courier_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID kurýra","title":"Courier Id"},"description":"ID kurýra"}],"responses":{"204":{"description":"Kurýr smazán"},"404":{"description":"Kurýr nenalezen","content":{"application/json":{"example":{"detail":"Courier not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/couriers/{courier_id}/location":{"patch":{"tags":["couriers","couriers"],"summary":"Aktualizovat GPS polohu kurýra","description":"Aktualizuje aktuální GPS polohu kurýra.\n\n## Kdy volat\n- Pravidelně z mobilní aplikace kurýra (např. každých 30 sekund)\n- Po změně polohy o více než X metrů\n\n## Důležité\n- Kurýr musí mít platnou GPS polohu, aby mohl být přiřazen k objednávce\n- Vzdálenost se počítá od místa vyzvednutí objednávky\n\n## Formát souřadnic\n- Latitude (šířka): -90 až 90 (Praha je cca 50.08)\n- Longitude (délka): -180 až 180 (Praha je cca 14.42)\n\n## Chyby\n- **404 Not Found** - Kurýr neexistuje\n- **422 Unprocessable Entity** - Neplatné souřadnice","operationId":"update_courier_location_api_v1_couriers__courier_id__location_patch","parameters":[{"name":"courier_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID kurýra","title":"Courier Id"},"description":"ID kurýra"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierLocationUpdate"}}}},"responses":{"200":{"description":"Lokace aktualizována","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierResponse"}}}},"404":{"description":"Kurýr nenalezen","content":{"application/json":{"example":{"detail":"Courier not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/couriers/{courier_id}/status":{"patch":{"tags":["couriers","couriers"],"summary":"Změnit stav kurýra","description":"Změní provozní stav kurýra.\n\n## Možné stavy\n\n| Stav | Popis | Může přijmout objednávku |\n|------|-------|--------------------------|\n| `offline` | Kurýr není v práci | Ne |\n| `available` | Kurýr je volný | Ano |\n| `busy` | Kurýr doručuje | Ne |\n\n## Typické přechody\n- **Začátek směny**: `offline` → `available`\n- **Konec směny**: `available` → `offline`\n- **Přiřazení objednávky**: `available` → `busy` (automaticky)\n- **Dokončení doručení**: `busy` → `available` (automaticky)\n\n## Upozornění\n- Stav `busy` je většinou nastaven automaticky při dispatch\n- Stav se automaticky změní na `available` po dokončení doručení\n\n## Chyby\n- **404 Not Found** - Kurýr neexistuje","operationId":"update_courier_status_api_v1_couriers__courier_id__status_patch","parameters":[{"name":"courier_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID kurýra","title":"Courier Id"},"description":"ID kurýra"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierStatusUpdate"}}}},"responses":{"200":{"description":"Stav změněn","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourierResponse"}}}},"404":{"description":"Kurýr nenalezen","content":{"application/json":{"example":{"detail":"Courier not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/":{"post":{"tags":["orders","orders"],"summary":"Vytvořit novou objednávku","description":"Vytvoří novou objednávku v systému.\n\n## Co se stane\n1. Vytvoří se nový záznam objednávky\n2. Objednávka je ve stavu `CREATED`\n3. Čeká na přiřazení kurýra (dispatch)\n\n## Další kroky\nPro přiřazení kurýra zavolejte `POST /dispatch/auto/{order_id}`.\n\n## GPS souřadnice\n- **pickup_lat/pickup_lng** - Místo vyzvednutí (restaurace)\n- **delivery_lat/delivery_lng** - Místo doručení (zákazník)\n\n## VIP objednávky\nNastavte `is_vip: true` pro prioritní zpracování.\nVIP objednávky preferují kurýry s tagem `vip`.\n\n## Požadavky na kurýra (tagy)\nPole `required_tags` určuje, jaké specializace musí mít kurýr.\nNapř. `[\"fragile_ok\"]` znamená, že kurýr musí mít tag `fragile_ok`.\n\n## Příklad\n```json\n{\n    \"customer_name\": \"Marie Svobodová\",\n    \"customer_phone\": \"+420606123456\",\n    \"pickup_address\": \"Restaurace U Malířů, Národní 25\",\n    \"pickup_lat\": 50.0815,\n    \"pickup_lng\": 14.4195,\n    \"delivery_address\": \"Vinohradská 50, Praha 2\",\n    \"delivery_lat\": 50.0755,\n    \"delivery_lng\": 14.4378,\n    \"is_vip\": false,\n    \"required_tags\": []\n}\n```","operationId":"create_order_api_v1_orders__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCreate"}}}},"responses":{"201":{"description":"Objednávka vytvořena","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"},"example":{"id":42,"customer_name":"Marie Svobodová","customer_phone":"+420606123456","pickup_address":"Národní 25, Praha 1","pickup_lat":50.0815,"pickup_lng":14.4195,"delivery_address":"Vinohradská 50, Praha 2","delivery_lat":50.0755,"delivery_lng":14.4378,"is_vip":false,"required_tags":[],"status":"CREATED","created_at":"2024-01-15T12:00:00"}}}},"422":{"description":"Neplatný formát dat","content":{"application/json":{"example":{"detail":[{"loc":["body","customer_phone"],"msg":"field required","type":"value_error.missing"}]}}}}}},"get":{"tags":["orders","orders"],"summary":"Získat seznam všech objednávek","description":"Vrátí stránkovaný seznam všech objednávek v systému.\n\n## Parametry\n- `skip` - Počet záznamů k přeskočení\n- `limit` - Maximální počet vrácených záznamů\n\n## Řazení\nObjednávky jsou řazeny podle data vytvoření (nejnovější první).\n\n## Tip\nPro filtrování podle stavu použijte `/orders/by-status/{status}`.","operationId":"get_orders_api_v1_orders__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Offset pro stránkování","default":0,"title":"Skip"},"description":"Offset pro stránkování"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Max počet záznamů","default":100,"title":"Limit"},"description":"Max počet záznamů"}],"responses":{"200":{"description":"Seznam objednávek","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponse"},"title":"Response Get Orders Api V1 Orders  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/pending":{"get":{"tags":["orders","orders"],"summary":"Získat objednávky čekající na kurýra","description":"Vrátí seznam objednávek ve stavu `SEARCHING` - čekají na přiřazení kurýra.\n\n## Kdy je objednávka ve stavu SEARCHING?\n- Po neúspěšném automatickém dispatch (žádný kurýr v dosahu)\n- Objednávka čeká na opakovaný pokus o dispatch\n\n## Využití\n- Dashboard dispečera pro manuální přiřazení\n- Monitoring nepřiřazených objednávek\n- Alert systém pro dlouho čekající objednávky","operationId":"get_pending_orders_api_v1_orders_pending_get","responses":{"200":{"description":"Seznam čekajících objednávek","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/OrderResponse"},"type":"array","title":"Response Get Pending Orders Api V1 Orders Pending Get"}}}}}}},"/api/v1/orders/by-status/{status}":{"get":{"tags":["orders","orders"],"summary":"Získat objednávky podle stavu","description":"Vrátí seznam všech objednávek v daném stavu.\n\n## Možné stavy\n\n| Stav | Popis |\n|------|-------|\n| `CREATED` | Nově vytvořená, čeká na dispatch |\n| `SEARCHING` | Hledá se kurýr |\n| `ASSIGNED` | Kurýr přiřazen, míří k vyzvednutí |\n| `PICKED` | Kurýr vyzvednul zásilku |\n| `DELIVERED` | Doručeno zákazníkovi |\n| `CANCELLED` | Zrušeno |\n\n## Příklady\n- `/orders/by-status/ASSIGNED` - Aktivní objednávky s kurýrem\n- `/orders/by-status/DELIVERED` - Dokončené objednávky\n- `/orders/by-status/CANCELLED` - Zrušené objednávky","operationId":"get_orders_by_status_api_v1_orders_by_status__status__get","parameters":[{"name":"status","in":"path","required":true,"schema":{"$ref":"#/components/schemas/OrderStatus","description":"Stav objednávky pro filtrování"},"description":"Stav objednávky pro filtrování"}],"responses":{"200":{"description":"Seznam objednávek v daném stavu","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponse"},"title":"Response Get Orders By Status Api V1 Orders By Status  Status  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/{order_id}":{"get":{"tags":["orders","orders"],"summary":"Získat detail objednávky","description":"Vrátí kompletní informace o objednávce včetně detailů přiřazeného kurýra.\n\n## Vrácené informace\n- Všechny údaje objednávky (zákazník, adresy, GPS)\n- Aktuální stav\n- ID kurýra + jeho jméno a telefon (pokud je přiřazen)\n- Časové údaje\n\n## Využití\n- Sledování stavu objednávky\n- Zobrazení kontaktu na kurýra\n- Detail pro zákazníka\n\n## Chyby\n- **404 Not Found** - Objednávka neexistuje","operationId":"get_order_api_v1_orders__order_id__get","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"}],"responses":{"200":{"description":"Detail objednávky s kurýrem","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderWithCourier"}}}},"404":{"description":"Objednávka nenalezena","content":{"application/json":{"example":{"detail":"Order not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["orders","orders"],"summary":"Smazat objednávku","description":"Trvale smaže objednávku ze systému.\n\n## Upozornění\n- Akce je **nevratná**!\n- Používejte pouze pro testování nebo opravu chyb\n- Pro běžné ukončení objednávky použijte `/orders/{id}/cancel`\n\n## Doporučení\nV produkci objednávky nemazat - slouží pro historii a reporting.\n\n## Chyby\n- **404 Not Found** - Objednávka neexistuje","operationId":"delete_order_api_v1_orders__order_id__delete","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"}],"responses":{"204":{"description":"Objednávka smazána"},"404":{"description":"Objednávka nenalezena","content":{"application/json":{"example":{"detail":"Order not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/{order_id}/status":{"patch":{"tags":["orders","orders"],"summary":"Změnit stav objednávky (admin)","description":"Administrativní endpoint pro přímou změnu stavu objednávky.\n\n## Upozornění\nPro běžné operace používejte specifické endpointy:\n- `/orders/{id}/pickup` - Kurýr vyzvednul\n- `/orders/{id}/deliver` - Kurýr doručil\n- `/orders/{id}/cancel` - Zrušení\n\nTento endpoint je určen pro **výjimečné situace** a opravy.\n\n## Chyby\n- **404 Not Found** - Objednávka neexistuje","operationId":"update_order_status_api_v1_orders__order_id__status_patch","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderStatusUpdate"}}}},"responses":{"200":{"description":"Stav změněn","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"404":{"description":"Objednávka nenalezena","content":{"application/json":{"example":{"detail":"Order not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/{order_id}/pickup":{"post":{"tags":["orders","orders"],"summary":"Označit objednávku jako vyzvednutou","description":"Kurýr označí, že vyzvednul objednávku v restauraci/obchodě.\n\n## Co se stane\n1. Stav se změní z `ASSIGNED` na `PICKED`\n2. Kurýr nyní vozí zásilku k zákazníkovi\n\n## Předpoklady\n- Objednávka musí být ve stavu `ASSIGNED`\n- Kurýr musí být přiřazen\n\n## Další krok\nPo doručení zavolejte `POST /orders/{id}/deliver`.\n\n## Chyby\n- **404 Not Found** - Objednávka neexistuje\n- **400 Bad Request** - Objednávka není ve stavu ASSIGNED","operationId":"mark_order_picked_api_v1_orders__order_id__pickup_post","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"}],"responses":{"200":{"description":"Objednávka označena jako vyzvednutá","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"},"example":{"id":42,"status":"PICKED","courier_id":5}}}},"400":{"description":"Neplatný stav pro vyzvednutí","content":{"application/json":{"example":{"detail":"Order cannot be picked up (status: CREATED)"}}}},"404":{"description":"Objednávka nenalezena","content":{"application/json":{"example":{"detail":"Order not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/{order_id}/deliver":{"post":{"tags":["orders","orders"],"summary":"Označit objednávku jako doručenou","description":"Kurýr označí, že doručil objednávku zákazníkovi.\n\n## Co se stane\n1. Stav se změní z `PICKED` na `DELIVERED`\n2. Kurýr se automaticky vrátí do stavu `available`\n3. Kurýr může přijmout další objednávku\n\n## Předpoklady\n- Objednávka musí být ve stavu `PICKED`\n\n## Poznámka\nToto je **konečný stav** objednávky. Po doručení nelze stav změnit.\n\n## Chyby\n- **404 Not Found** - Objednávka neexistuje\n- **400 Bad Request** - Objednávka není ve stavu PICKED","operationId":"mark_order_delivered_api_v1_orders__order_id__deliver_post","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"}],"responses":{"200":{"description":"Objednávka doručena","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"},"example":{"id":42,"status":"DELIVERED","courier_id":5}}}},"400":{"description":"Neplatný stav pro doručení","content":{"application/json":{"example":{"detail":"Order cannot be delivered (status: ASSIGNED)"}}}},"404":{"description":"Objednávka nenalezena","content":{"application/json":{"example":{"detail":"Order not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/{order_id}/cancel":{"post":{"tags":["orders","orders"],"summary":"Zrušit objednávku","description":"Zruší objednávku a uvolní kurýra (pokud byl přiřazen).\n\n## Co se stane\n1. Stav se změní na `CANCELLED`\n2. Pokud byl přiřazen kurýr, vrátí se do stavu `available`\n3. Objednávka je ukončena\n\n## Kdy lze zrušit\n- `CREATED` - Ano\n- `SEARCHING` - Ano\n- `ASSIGNED` - Ano (kurýr se uvolní)\n- `PICKED` - Ano (kurýr se uvolní)\n- `DELIVERED` - **NE** (již doručeno)\n- `CANCELLED` - **NE** (již zrušeno)\n\n## Důvody zrušení\n- Zákazník si rozmyslel objednávku\n- Restaurace nemůže objednávku připravit\n- Technický problém\n\n## Chyby\n- **404 Not Found** - Objednávka neexistuje\n- **400 Bad Request** - Objednávku nelze zrušit (DELIVERED/CANCELLED)","operationId":"cancel_order_api_v1_orders__order_id__cancel_post","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"}],"responses":{"200":{"description":"Objednávka zrušena","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"},"example":{"id":42,"status":"CANCELLED","courier_id":5}}}},"400":{"description":"Objednávku nelze zrušit","content":{"application/json":{"example":{"detail":"Order cannot be cancelled (status: DELIVERED)"}}}},"404":{"description":"Objednávka nenalezena","content":{"application/json":{"example":{"detail":"Order not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dispatch/auto/{order_id}":{"post":{"tags":["dispatch","dispatch"],"summary":"Automaticky přiřadit kurýra k objednávce","description":"Automaticky najde a přiřadí nejbližšího vhodného kurýra k objednávce.\n\n## Jak algoritmus funguje\n\n### Krok 1: Najdi kandidáty\n- Vybere všechny kurýry ve stavu `available`\n- Musí mít platnou GPS polohu\n\n### Krok 2: Filtruj podle tagů\n- Pokud objednávka má `required_tags`, kurýr musí mít **všechny** tyto tagy\n- Např. objednávka vyžaduje `[\"fragile_ok\", \"bike\"]` → kurýr musí mít oba\n\n### Krok 3: VIP priorita\n- Pro VIP objednávky (`is_vip: true`) se nejdřív zkusí najít kurýr s tagem `vip`\n- Pokud žádný VIP kurýr není dostupný, použije se běžný kurýr\n\n### Krok 4: Fázové hledání\n1. **Fáze 1 (2 km)**: Hledá kurýry do 2 km od místa vyzvednutí\n2. **Fáze 2 (5 km)**: Pokud nikdo není v 2 km, rozšíří na 5 km\n\n### Krok 5: Výběr nejbližšího\n- Ze všech kandidátů v dosahu vybere **nejbližšího**\n- Vzdálenost se počítá pomocí Haversine vzorce (GPS)\n\n## Co se stane po úspěchu\n1. Objednávka přejde do stavu `ASSIGNED`\n2. Kurýr přejde do stavu `busy`\n3. Vytvoří se záznam v dispatch logu\n\n## Co se stane po neúspěchu\n1. Objednávka přejde do stavu `SEARCHING`\n2. Vrátí se `success: false` s důvodem\n3. Můžete zkusit znovu později nebo použít manuální dispatch\n\n## Příklady odpovědí\n\n### Úspěch\n```json\n{\n    \"success\": true,\n    \"message\": \"Kurýr Jan Novák přiřazen (vzdálenost: 1.2 km)\",\n    \"order_id\": 42,\n    \"courier_id\": 5\n}\n```\n\n### Neúspěch - žádný kurýr v dosahu\n```json\n{\n    \"success\": false,\n    \"message\": \"No available courier found within 5km radius\",\n    \"order_id\": 42,\n    \"courier_id\": null\n}\n```\n\n### Neúspěch - chybí tagy\n```json\n{\n    \"success\": false,\n    \"message\": \"No courier with required tags: fragile_ok\",\n    \"order_id\": 42,\n    \"courier_id\": null\n}\n```\n\n## Chyby\n- **Objednávka neexistuje** - `success: false`, message obsahuje \"not found\"\n- **Objednávka již přiřazena** - `success: false`, message obsahuje \"cannot be dispatched\"","operationId":"dispatch_order_auto_api_v1_dispatch_auto__order_id__post","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky k dispatchnutí","title":"Order Id"},"description":"ID objednávky k dispatchnutí"}],"responses":{"200":{"description":"Výsledek dispatch operace","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DispatchResult"},"examples":{"success":{"summary":"Úspěšný dispatch","value":{"success":true,"message":"Kurýr Jan Novák přiřazen (vzdálenost: 1.2 km)","order_id":42,"courier_id":5}},"no_courier":{"summary":"Žádný kurýr v dosahu","value":{"success":false,"message":"No available courier found within 5km radius","order_id":42}},"wrong_state":{"summary":"Objednávka v neplatném stavu","value":{"success":false,"message":"Order 42 cannot be dispatched (status: DELIVERED)","order_id":42}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dispatch/manual":{"post":{"tags":["dispatch","dispatch"],"summary":"Manuálně přiřadit kurýra k objednávce","description":"Manuálně přiřadí konkrétního kurýra k objednávce.\n\n## Kdy použít\n- Zákazník si vyžádal konkrétního kurýra\n- Automatický dispatch selhal a operátor vybírá ručně\n- Speciální situace vyžadující lidské rozhodnutí\n- Kurýr je mimo standardní dosah ale může objednávku obsloužit\n\n## Předpoklady\n- Objednávka musí být ve stavu `CREATED` nebo `SEARCHING`\n- Kurýr musí být ve stavu `available`\n- Kurýr musí mít všechny požadované tagy objednávky\n\n## Co se ověřuje\n1. Objednávka existuje a je v dispatchovatelném stavu\n2. Kurýr existuje a je dostupný\n3. Kurýr má všechny požadované tagy\n\n## Co se stane po úspěchu\n1. Objednávka přejde do stavu `ASSIGNED`\n2. Kurýr přejde do stavu `busy`\n3. Vytvoří se záznam v dispatch logu s akcí `manual_assigned`\n\n## Příklad požadavku\n```json\n{\n    \"order_id\": 42,\n    \"courier_id\": 5\n}\n```\n\n## Chyby\n- **Kurýr není dostupný** - `success: false`\n- **Kurýr nemá požadované tagy** - `success: false`\n- **Objednávka v neplatném stavu** - `success: false`","operationId":"dispatch_order_manual_api_v1_dispatch_manual_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DispatchAssign"}}},"required":true},"responses":{"200":{"description":"Výsledek manuálního dispatch","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DispatchResult"},"examples":{"success":{"summary":"Úspěšné přiřazení","value":{"success":true,"message":"Courier successfully assigned to order","order_id":42,"courier_id":5}},"courier_busy":{"summary":"Kurýr není dostupný","value":{"success":false,"message":"Courier 5 is not available (status: busy)","order_id":42}},"missing_tags":{"summary":"Kurýr nemá požadované tagy","value":{"success":false,"message":"Courier 5 missing required tags: fragile_ok","order_id":42}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dispatch/available-couriers/{order_id}":{"get":{"tags":["dispatch","dispatch"],"summary":"Získat seznam vhodných kurýrů pro objednávku","description":"Vrátí seznam všech kurýrů, kteří mohou převzít danou objednávku.\n\n## Co se kontroluje\n- Kurýr je ve stavu `available`\n- Kurýr má platnou GPS polohu\n- Kurýr má všechny `required_tags` objednávky\n- Kurýr je v zadaném radiusu od místa vyzvednutí\n\n## Využití\n- UI pro manuální dispatch - operátor vidí kandidáty\n- Zobrazení kurýrů na mapě\n- Rozhodování před manuálním přiřazením\n\n## Parametry\n- `order_id` - ID objednávky\n- `radius_km` - Maximální vzdálenost v km (default 10)\n\n## Vrácená data\nPro každého kurýra:\n- Základní info (ID, jméno, telefon)\n- Vzdálenost od místa vyzvednutí\n- Je-li VIP kurýr\n- Seznam tagů\n\n## Řazení\nKurýři jsou seřazeni podle vzdálenosti (nejbližší první).\nPro VIP objednávky jsou VIP kurýři na začátku.\n\n## Příklad odpovědi\n```json\n{\n    \"order_id\": 42,\n    \"radius_km\": 10.0,\n    \"count\": 2,\n    \"couriers\": [\n        {\n            \"courier_id\": 5,\n            \"name\": \"Jan Novák\",\n            \"phone\": \"+420777123456\",\n            \"distance_km\": 1.2,\n            \"is_vip_courier\": true,\n            \"tags\": [\"bike\", \"vip\"]\n        },\n        {\n            \"courier_id\": 8,\n            \"name\": \"Petr Svoboda\",\n            \"phone\": \"+420666789012\",\n            \"distance_km\": 2.5,\n            \"is_vip_courier\": false,\n            \"tags\": [\"bike\"]\n        }\n    ]\n}\n```","operationId":"get_couriers_for_order_api_v1_dispatch_available_couriers__order_id__get","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"},{"name":"radius_km","in":"query","required":false,"schema":{"type":"number","maximum":100.0,"minimum":0.1,"description":"Maximální vzdálenost od místa vyzvednutí v km","default":10.0,"title":"Radius Km"},"description":"Maximální vzdálenost od místa vyzvednutí v km"}],"responses":{"200":{"description":"Seznam dostupných kurýrů","content":{"application/json":{"schema":{},"examples":{"found":{"summary":"Nalezeni kurýři","value":{"order_id":42,"radius_km":10.0,"count":2,"couriers":[{"courier_id":5,"name":"Jan Novák","phone":"+420777123456","distance_km":1.2,"is_vip_courier":true,"tags":["bike","vip"]}]}},"empty":{"summary":"Žádný kurýr nenalezen","value":{"order_id":42,"radius_km":10.0,"couriers":[],"message":"No available couriers found"}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dispatch/logs/order/{order_id}":{"get":{"tags":["dispatch","dispatch"],"summary":"Získat historii dispatchů pro objednávku","description":"Vrátí kompletní historii přiřazení kurýrů k dané objednávce.\n\n## Využití\n- Audit a debugging\n- Zobrazení historie v detailu objednávky\n- Analýza problémů s dispatchem\n\n## Typy záznamů (action)\n\n| Akce | Popis |\n|------|-------|\n| `auto_assigned` | Kurýr přiřazen automatickým algoritmem |\n| `manual_assigned` | Kurýr přiřazen operátorem ručně |\n| `auto_failed` | Automatický dispatch selhal |\n| `rejected` | Kurýr odmítl objednávku |\n\n## Řazení\nZáznamy jsou seřazeny od nejnovějšího.\n\n## Příklad odpovědi\n```json\n[\n    {\n        \"id\": 456,\n        \"order_id\": 42,\n        \"courier_id\": 5,\n        \"action\": \"auto_assigned\",\n        \"created_at\": \"2024-01-15T12:05:00\"\n    },\n    {\n        \"id\": 455,\n        \"order_id\": 42,\n        \"courier_id\": 3,\n        \"action\": \"auto_failed\",\n        \"created_at\": \"2024-01-15T12:04:30\"\n    }\n]\n```","operationId":"get_dispatch_logs_for_order_api_v1_dispatch_logs_order__order_id__get","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID objednávky","title":"Order Id"},"description":"ID objednávky"}],"responses":{"200":{"description":"Historie dispatchů pro objednávku","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DispatchLogResponse"},"title":"Response Get Dispatch Logs For Order Api V1 Dispatch Logs Order  Order Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dispatch/logs/courier/{courier_id}":{"get":{"tags":["dispatch","dispatch"],"summary":"Získat historii dispatchů pro kurýra","description":"Vrátí kompletní historii přiřazení objednávek danému kurýrovi.\n\n## Využití\n- Analýza výkonu kurýra\n- Přehled dokončených objednávek\n- Debugging problémů s konkrétním kurýrem\n\n## Informace v záznamu\n- Které objednávky kurýr dostal\n- Zda byly automaticky nebo manuálně přiřazeny\n- Časové údaje\n\n## Řazení\nZáznamy jsou seřazeny od nejnovějšího.\n\n## Příklad odpovědi\n```json\n[\n    {\n        \"id\": 456,\n        \"order_id\": 42,\n        \"courier_id\": 5,\n        \"action\": \"auto_assigned\",\n        \"created_at\": \"2024-01-15T12:05:00\"\n    },\n    {\n        \"id\": 400,\n        \"order_id\": 38,\n        \"courier_id\": 5,\n        \"action\": \"manual_assigned\",\n        \"created_at\": \"2024-01-15T10:30:00\"\n    }\n]\n```","operationId":"get_dispatch_logs_for_courier_api_v1_dispatch_logs_courier__courier_id__get","parameters":[{"name":"courier_id","in":"path","required":true,"schema":{"type":"integer","minimum":1,"description":"ID kurýra","title":"Courier Id"},"description":"ID kurýra"}],"responses":{"200":{"description":"Historie dispatchů pro kurýra","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DispatchLogResponse"},"title":"Response Get Dispatch Logs For Courier Api V1 Dispatch Logs Courier  Courier Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logs/frontend":{"post":{"tags":["Logs"],"summary":"Forward Frontend Logs","description":"Předá frontend logy do Loki.\n\nTím se obejde CORS problém - backend posílá do Loki jako server-to-server.","operationId":"forward_frontend_logs_api_v1_logs_frontend_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Logs"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AttachmentCreate":{"properties":{"filename":{"type":"string","maxLength":255,"minLength":1,"title":"Filename","description":"Název souboru včetně přípony","example":"dokument.pdf"},"content_type":{"type":"string","title":"Content Type","description":"MIME typ souboru (application/pdf, text/plain)","example":"application/pdf"},"instructions":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Instructions","description":"Volitelné instrukce k příloze","example":"Naskenovaný formulář k podpisu"},"data_base64":{"type":"string","title":"Data Base64","description":"Obsah souboru zakódovaný v base64. Maximální velikost po dekódování: 1 MB.","example":"JVBERi0xLjQKJeLjz9MKMyAwIG9iago8PC..."}},"type":"object","required":["filename","content_type","data_base64"],"title":"AttachmentCreate","description":"Schéma pro nahrání nové přílohy (data jako base64)."},"AttachmentOut":{"properties":{"filename":{"type":"string","maxLength":255,"minLength":1,"title":"Filename","description":"Název souboru včetně přípony","example":"dokument.pdf"},"content_type":{"type":"string","title":"Content Type","description":"MIME typ souboru (application/pdf, text/plain)","example":"application/pdf"},"instructions":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Instructions","description":"Volitelné instrukce k příloze","example":"Naskenovaný formulář k podpisu"},"id":{"type":"integer","title":"Id","description":"Unikátní identifikátor přílohy","example":1},"form_id":{"type":"integer","title":"Form Id","description":"ID formuláře, ke kterému příloha patří","example":1}},"type":"object","required":["filename","content_type","id","form_id"],"title":"AttachmentOut","description":"Schéma přílohy pro čtení (bez binárních dat)."},"CourierCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":2,"title":"Name","description":"Celé jméno kurýra","example":"Jan Novák"},"phone":{"type":"string","maxLength":20,"minLength":9,"title":"Phone","description":"Telefonní číslo kurýra v mezinárodním formátu","example":"+420777123456"},"email":{"type":"string","format":"email","title":"Email","description":"E-mailová adresa kurýra (musí být unikátní v systému)","example":"jan.novak@example.cz"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Seznam tagů/specializací kurýra. Běžné tagy:\n        - `bike` - jezdí na kole\n        - `car` - má auto\n        - `vip` - preferovaný pro VIP objednávky\n        - `fragile_ok` - může vozit křehké zboží\n        - `fast` - expresní doručení\n        ","default":[],"example":["bike","vip"]}},"type":"object","required":["name","phone","email"],"title":"CourierCreate","description":"Schéma pro vytvoření nového kurýra.\n\nPo vytvoření je kurýr ve stavu `offline` bez GPS polohy.\nPro aktivaci je potřeba nastavit lokaci a změnit stav na `available`.\n\n## Příklad použití\n\n```json\n{\n    \"name\": \"Jan Novák\",\n    \"phone\": \"+420777123456\",\n    \"email\": \"jan.novak@example.cz\",\n    \"tags\": [\"bike\", \"vip\"]\n}\n```","example":{"email":"jan.novak@example.cz","name":"Jan Novák","phone":"+420777123456","tags":["bike","vip"]}},"CourierLocationUpdate":{"properties":{"lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Lat","description":"Zeměpisná šířka (latitude) - WGS84","example":50.0755},"lng":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Lng","description":"Zeměpisná délka (longitude) - WGS84","example":14.4378}},"type":"object","required":["lat","lng"],"title":"CourierLocationUpdate","description":"Schéma pro aktualizaci GPS polohy kurýra.\n\nTato akce by měla být volána pravidelně z mobilní aplikace kurýra\npro sledování jeho pozice v reálném čase.\n\n## Souřadnice\n\n- `lat` (latitude) - zeměpisná šířka (-90 až 90)\n- `lng` (longitude) - zeměpisná délka (-180 až 180)\n\n## Příklad - centrum Prahy\n\n```json\n{\n    \"lat\": 50.0755,\n    \"lng\": 14.4378\n}\n```","example":{"lat":50.0755,"lng":14.4378}},"CourierResponse":{"properties":{"name":{"type":"string","maxLength":100,"minLength":2,"title":"Name","description":"Celé jméno kurýra","example":"Jan Novák"},"phone":{"type":"string","maxLength":20,"minLength":9,"title":"Phone","description":"Telefonní číslo kurýra v mezinárodním formátu","example":"+420777123456"},"email":{"type":"string","format":"email","title":"Email","description":"E-mailová adresa kurýra (musí být unikátní v systému)","example":"jan.novak@example.cz"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Seznam tagů/specializací kurýra. Běžné tagy:\n        - `bike` - jezdí na kole\n        - `car` - má auto\n        - `vip` - preferovaný pro VIP objednávky\n        - `fragile_ok` - může vozit křehké zboží\n        - `fast` - expresní doručení\n        ","default":[],"example":["bike","vip"]},"id":{"type":"integer","title":"Id","description":"Unikátní identifikátor kurýra v databázi","example":1},"lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lat","description":"Aktuální zeměpisná šířka (null pokud GPS není nastavena)","example":50.0755},"lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lng","description":"Aktuální zeměpisná délka (null pokud GPS není nastavena)","example":14.4378},"status":{"$ref":"#/components/schemas/CourierStatus","description":"Aktuální stav kurýra","example":"available"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datum a čas vytvoření záznamu","example":"2024-01-15T10:30:00"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Datum a čas poslední aktualizace","example":"2024-01-15T14:45:00"}},"type":"object","required":["name","phone","email","id","status","created_at"],"title":"CourierResponse","description":"Kompletní odpověď s daty kurýra.\n\nVrací se při GET operacích a po vytvoření/aktualizaci kurýra.\nObsahuje všechny atributy včetně ID, stavu a GPS polohy.\n\n## Příklad odpovědi\n\n```json\n{\n    \"id\": 1,\n    \"name\": \"Jan Novák\",\n    \"phone\": \"+420777123456\",\n    \"email\": \"jan.novak@example.cz\",\n    \"tags\": [\"bike\", \"vip\"],\n    \"lat\": 50.0755,\n    \"lng\": 14.4378,\n    \"status\": \"available\",\n    \"created_at\": \"2024-01-15T10:30:00\",\n    \"updated_at\": \"2024-01-15T14:45:00\"\n}\n```","example":{"created_at":"2024-01-15T10:30:00","email":"jan.novak@example.cz","id":1,"lat":50.0755,"lng":14.4378,"name":"Jan Novák","phone":"+420777123456","status":"available","tags":["bike","vip"],"updated_at":"2024-01-15T14:45:00"}},"CourierStatus":{"type":"string","enum":["available","busy","offline"],"title":"CourierStatus","description":"Courier availability status."},"CourierStatusUpdate":{"properties":{"status":{"$ref":"#/components/schemas/CourierStatus","description":"Nový stav kurýra: offline, available, nebo busy","example":"available"}},"type":"object","required":["status"],"title":"CourierStatusUpdate","description":"Schéma pro změnu stavu kurýra.\n\n## Možné stavy\n\n| Stav | Popis | Může přijmout objednávku |\n|------|-------|--------------------------|\n| `offline` | Kurýr není k dispozici | Ne |\n| `available` | Kurýr je volný a čeká na objednávku | Ano |\n| `busy` | Kurýr právě doručuje | Ne |\n\n## Stavové přechody\n\n- `offline` → `available`: Kurýr se přihlásil do směny\n- `available` → `busy`: Kurýr přijal objednávku (automaticky při dispatch)\n- `busy` → `available`: Kurýr dokončil doručení (automaticky)\n- `available` → `offline`: Kurýr ukončil směnu\n- `busy` → `offline`: Nelze! Musí nejdřív dokončit objednávku\n\n## Příklad\n\n```json\n{\n    \"status\": \"available\"\n}\n```","example":{"status":"available"}},"CourierUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":2},{"type":"null"}],"title":"Name","description":"Nové jméno kurýra","example":"Jan Novák ml."},"phone":{"anyOf":[{"type":"string","maxLength":20,"minLength":9},{"type":"null"}],"title":"Phone","description":"Nové telefonní číslo","example":"+420777999888"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags","description":"Nový seznam tagů (nahradí stávající)","example":["car","vip"]}},"type":"object","title":"CourierUpdate","description":"Schéma pro aktualizaci údajů kurýra.\n\nVšechna pole jsou volitelná - odešlete pouze ta, která chcete změnit.\nE-mail nelze změnit (je unikátní identifikátor).\n\n## Příklad - změna jména a tagů\n\n```json\n{\n    \"name\": \"Jan Novák ml.\",\n    \"tags\": [\"car\", \"vip\", \"fragile_ok\"]\n}\n```","example":{"name":"Jan Novák ml.","tags":["car","vip"]}},"DeleteResponse":{"properties":{"message":{"type":"string","title":"Message","description":"Potvrzovací zpráva","example":"Záznam úspěšně smazán"}},"type":"object","required":["message"],"title":"DeleteResponse","description":"Odpověď po smazání záznamu."},"DispatchAssign":{"properties":{"order_id":{"type":"integer","title":"Order Id","description":"ID objednávky k přiřazení","example":42},"courier_id":{"type":"integer","title":"Courier Id","description":"ID kurýra, který má objednávku převzít","example":5}},"type":"object","required":["order_id","courier_id"],"title":"DispatchAssign","description":"Schéma pro manuální přiřazení kurýra k objednávce.\n\nPoužívá se, když operátor chce přepsat automatický dispatch\na přiřadit konkrétního kurýra k objednávce.\n\n## Kdy použít manuální dispatch\n\n- Zákazník si vyžádal konkrétního kurýra\n- Automatický dispatch selhal a operátor vybírá ručně\n- Speciální situace vyžadující lidské rozhodnutí\n\n## Předpoklady\n\n- Objednávka musí být ve stavu `CREATED` nebo `SEARCHING`\n- Kurýr musí být ve stavu `available`\n- Kurýr musí mít všechny požadované tagy objednávky\n\n## Příklad\n\n```json\n{\n    \"order_id\": 42,\n    \"courier_id\": 5\n}\n```","example":{"courier_id":5,"order_id":42}},"DispatchLogResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Unikátní ID záznamu v logu","example":123},"order_id":{"type":"integer","title":"Order Id","description":"ID objednávky, které se záznam týká","example":42},"courier_id":{"type":"integer","title":"Courier Id","description":"ID kurýra, který byl přiřazen/odmítnut","example":5},"action":{"type":"string","title":"Action","description":"Typ akce: auto_assigned, manual_assigned, auto_failed, rejected","example":"auto_assigned"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datum a čas vytvoření záznamu","example":"2024-01-15T12:05:00"}},"type":"object","required":["id","order_id","courier_id","action","created_at"],"title":"DispatchLogResponse","description":"Záznam v logu dispečinku.\n\nKaždé přiřazení (úspěšné i neúspěšné) vytváří záznam v logu.\nSlouží pro audit, analýzu a řešení sporů.\n\n## Typy akcí (action)\n\n| Akce | Popis |\n|------|-------|\n| `auto_assigned` | Kurýr přiřazen automatickým algoritmem |\n| `manual_assigned` | Kurýr přiřazen operátorem ručně |\n| `auto_failed` | Automatický dispatch selhal (žádný kurýr) |\n| `rejected` | Kurýr odmítl objednávku |\n\n## Příklad odpovědi\n\n```json\n{\n    \"id\": 123,\n    \"order_id\": 42,\n    \"courier_id\": 5,\n    \"action\": \"auto_assigned\",\n    \"created_at\": \"2024-01-15T12:05:00\"\n}\n```","example":{"action":"auto_assigned","courier_id":5,"created_at":"2024-01-15T12:05:00","id":123,"order_id":42}},"DispatchResult":{"properties":{"success":{"type":"boolean","title":"Success","description":"True pokud byl kurýr úspěšně přiřazen, False jinak","example":true},"message":{"type":"string","title":"Message","description":"Textový popis výsledku operace","example":"Kurýr Jan Novák přiřazen (vzdálenost: 1.2 km)"},"order_id":{"type":"integer","title":"Order Id","description":"ID objednávky, které se operace týká","example":42},"courier_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Courier Id","description":"ID přiřazeného kurýra (null pokud dispatch selhal)","example":5}},"type":"object","required":["success","message","order_id"],"title":"DispatchResult","description":"Výsledek operace dispečinku.\n\nVrací se po každém pokusu o přiřazení kurýra (automatickém i manuálním).\n\n## Úspěšný dispatch\n\n```json\n{\n    \"success\": true,\n    \"message\": \"Kurýr Jan Novák přiřazen (vzdálenost: 1.2 km)\",\n    \"order_id\": 42,\n    \"courier_id\": 5\n}\n```\n\n## Neúspěšný dispatch\n\n```json\n{\n    \"success\": false,\n    \"message\": \"No available courier found within 5km radius\",\n    \"order_id\": 42,\n    \"courier_id\": null\n}\n```\n\n## Možné důvody neúspěchu\n\n- Žádný kurýr v dosahu (2km, pak 5km)\n- Žádný kurýr s požadovanými tagy\n- Všichni kurýři jsou busy nebo offline\n- Objednávka je v neplatném stavu\n- Objednávka nebo kurýr neexistuje","examples":[{"summary":"Úspěšný dispatch","value":{"courier_id":5,"message":"Kurýr Jan Novák přiřazen (vzdálenost: 1.2 km)","order_id":42,"success":true}},{"summary":"Neúspěšný dispatch - žádný kurýr","value":{"message":"No available courier found within 5km radius","order_id":42,"success":false}}]},"ErrorResponse":{"properties":{"detail":{"type":"string","title":"Detail","description":"Popis chyby","example":"Záznam nenalezen"}},"type":"object","required":["detail"],"title":"ErrorResponse","description":"Schéma chybové odpovědi."},"FormData":{"properties":{"first_name":{"type":"string","maxLength":100,"minLength":1,"title":"First Name","description":"Křestní jméno","example":"Jan"},"last_name":{"type":"string","maxLength":100,"minLength":1,"title":"Last Name","description":"Příjmení","example":"Novák"},"phone":{"type":"string","maxLength":25,"minLength":9,"title":"Phone","description":"Telefonní číslo (9-25 znaků)","example":"+420 123 456 789"},"gender":{"type":"string","title":"Gender","description":"Pohlaví: male, female nebo other","example":"male"},"email":{"type":"string","format":"email","title":"Email","description":"Emailová adresa (musí být unikátní v systému)","example":"jan.novak@example.com"},"id":{"type":"integer","title":"Id","description":"Unikátní identifikátor formuláře","example":1}},"type":"object","required":["first_name","last_name","phone","gender","email","id"],"title":"FormData","description":"Schéma formuláře s ID (pro čtení z databáze)."},"FormDataCreate":{"properties":{"first_name":{"type":"string","maxLength":100,"minLength":1,"title":"First Name","description":"Křestní jméno","example":"Jan"},"last_name":{"type":"string","maxLength":100,"minLength":1,"title":"Last Name","description":"Příjmení","example":"Novák"},"phone":{"type":"string","maxLength":25,"minLength":9,"title":"Phone","description":"Telefonní číslo (9-25 znaků)","example":"+420 123 456 789"},"gender":{"type":"string","title":"Gender","description":"Pohlaví: male, female nebo other","example":"male"},"email":{"type":"string","format":"email","title":"Email","description":"Emailová adresa (musí být unikátní v systému)","example":"jan.novak@example.com"}},"type":"object","required":["first_name","last_name","phone","gender","email"],"title":"FormDataCreate","description":"Schéma pro vytvoření nového formuláře."},"FormDataResponse":{"properties":{"first_name":{"type":"string","maxLength":100,"minLength":1,"title":"First Name","description":"Křestní jméno","example":"Jan"},"last_name":{"type":"string","maxLength":100,"minLength":1,"title":"Last Name","description":"Příjmení","example":"Novák"},"phone":{"type":"string","maxLength":25,"minLength":9,"title":"Phone","description":"Telefonní číslo (9-25 znaků)","example":"+420 123 456 789"},"gender":{"type":"string","title":"Gender","description":"Pohlaví: male, female nebo other","example":"male"},"email":{"type":"string","format":"email","title":"Email","description":"Emailová adresa (musí být unikátní v systému)","example":"jan.novak@example.com"},"id":{"type":"integer","title":"Id","description":"Unikátní identifikátor formuláře","example":1},"easter_egg":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Easter Egg","description":"True pokud jméno/příjmení odpovídá tajnému tokenu (mini hra)"},"secret_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secret Message","description":"Tajná zpráva zobrazená při shodě s easter egg","example":"Tajemství odhaleno: 'neo'! Máš oko sokola."}},"type":"object","required":["first_name","last_name","phone","gender","email","id"],"title":"FormDataResponse","description":"Rozšířená odpověď pro FE s výsledkem mini-hry.\n\n- easter_egg: zda došlo k zásahu (jméno odpovídá některému tajnému seznamu)\n- secret_message: zpráva pro FE (zobrazitelná hláška)"},"GameResponse":{"properties":{"matched":{"type":"boolean","title":"Matched","description":"True pokud text odpovídá tajnému tokenu"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Zpráva pro uživatele (pouze při matched=true)","example":"Tajemství odhaleno: 'neo'! Máš oko sokola."}},"type":"object","required":["matched"],"title":"GameResponse","description":"Odpověď mini-hry - výsledek vyhodnocení tajného jména."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InstructionCreate":{"properties":{"text":{"type":"string","maxLength":5000,"minLength":1,"title":"Text","description":"Text instrukcí k formuláři","example":"Vyplňte prosím všechna povinná pole a odešlete formulář."}},"type":"object","required":["text"],"title":"InstructionCreate","description":"Schéma pro vytvoření/aktualizaci instrukcí."},"InstructionOut":{"properties":{"text":{"type":"string","maxLength":5000,"minLength":1,"title":"Text","description":"Text instrukcí k formuláři","example":"Vyplňte prosím všechna povinná pole a odešlete formulář."},"id":{"type":"integer","title":"Id","description":"Unikátní identifikátor instrukcí","example":1},"form_id":{"type":"integer","title":"Form Id","description":"ID formuláře, ke kterému instrukce patří","example":1}},"type":"object","required":["text","id","form_id"],"title":"InstructionOut","description":"Schéma instrukcí pro čtení."},"NameInput":{"properties":{"text":{"type":"string","maxLength":200,"minLength":1,"title":"Text","description":"Text k ověření (jméno, slovo)","example":"neo"}},"type":"object","required":["text"],"title":"NameInput","description":"Vstup pro vyhodnocení tajného jména v mini hře."},"OrderCreate":{"properties":{"customer_name":{"type":"string","maxLength":100,"minLength":2,"title":"Customer Name","description":"Jméno zákazníka, který objednávku přijímá","example":"Marie Svobodová"},"customer_phone":{"type":"string","maxLength":20,"minLength":9,"title":"Customer Phone","description":"Telefonní číslo zákazníka pro kontakt při doručení","example":"+420606123456"},"pickup_address":{"type":"string","maxLength":200,"minLength":3,"title":"Pickup Address","description":"Adresa místa vyzvednutí (restaurace, obchod)","example":"Národní 25, Praha 1"},"pickup_lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Pickup Lat","description":"GPS šířka místa vyzvednutí","example":50.0815},"pickup_lng":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Pickup Lng","description":"GPS délka místa vyzvednutí","example":14.4195},"delivery_address":{"type":"string","maxLength":200,"minLength":3,"title":"Delivery Address","description":"Adresa doručení k zákazníkovi","example":"Vinohradská 50, Praha 2"},"delivery_lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Delivery Lat","description":"GPS šířka místa doručení","example":50.0755},"delivery_lng":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Delivery Lng","description":"GPS délka místa doručení","example":14.4378},"is_vip":{"type":"boolean","title":"Is Vip","description":"VIP příznak objednávky.\n\n        VIP objednávky mají prioritu při přiřazování kurýra:\n        - Preferují se kurýři s tagem `vip`\n        - Pokud žádný VIP kurýr není k dispozici, přiřadí se běžný kurýr\n        ","default":false,"example":false},"required_tags":{"items":{"type":"string"},"type":"array","title":"Required Tags","description":"Seznam tagů, které musí mít kurýr pro tuto objednávku.\n\n        Běžné tagy:\n        - `fragile_ok` - objednávka obsahuje křehké zboží\n        - `fast` - expresní doručení\n        - `bike` / `car` - specifický typ dopravy\n\n        Kurýr MUSÍ mít VŠECHNY požadované tagy, aby mohl objednávku převzít.\n        ","default":[],"example":["fragile_ok"]}},"type":"object","required":["customer_name","customer_phone","pickup_address","pickup_lat","pickup_lng","delivery_address","delivery_lat","delivery_lng"],"title":"OrderCreate","description":"Schéma pro vytvoření nové objednávky.\n\nPo vytvoření je objednávka ve stavu `CREATED`.\nPro přiřazení kurýra použijte endpoint `/dispatch/auto/{order_id}`.\n\n## Životní cyklus objednávky\n\n1. **CREATED** - Objednávka vytvořena, čeká na dispatch\n2. **SEARCHING** - Hledá se vhodný kurýr\n3. **ASSIGNED** - Kurýr přiřazen, míří k vyzvednutí\n4. **PICKED** - Kurýr vyzvednul objednávku\n5. **DELIVERED** - Doručeno zákazníkovi\n6. **CANCELLED** - Objednávka zrušena (může nastat kdykoli před DELIVERED)\n\n## Příklad vytvoření\n\n```json\n{\n    \"customer_name\": \"Marie Svobodová\",\n    \"customer_phone\": \"+420606123456\",\n    \"pickup_address\": \"Národní 25, Praha 1\",\n    \"pickup_lat\": 50.0815,\n    \"pickup_lng\": 14.4195,\n    \"delivery_address\": \"Vinohradská 50, Praha 2\",\n    \"delivery_lat\": 50.0755,\n    \"delivery_lng\": 14.4378,\n    \"is_vip\": false,\n    \"required_tags\": []\n}\n```","example":{"customer_name":"Marie Svobodová","customer_phone":"+420606123456","delivery_address":"Vinohradská 50, Praha 2","delivery_lat":50.0755,"delivery_lng":14.4378,"is_vip":false,"pickup_address":"Národní 25, Praha 1","pickup_lat":50.0815,"pickup_lng":14.4195,"required_tags":[]}},"OrderResponse":{"properties":{"customer_name":{"type":"string","maxLength":100,"minLength":2,"title":"Customer Name","description":"Jméno zákazníka, který objednávku přijímá","example":"Marie Svobodová"},"customer_phone":{"type":"string","maxLength":20,"minLength":9,"title":"Customer Phone","description":"Telefonní číslo zákazníka pro kontakt při doručení","example":"+420606123456"},"pickup_address":{"type":"string","maxLength":200,"minLength":3,"title":"Pickup Address","description":"Adresa místa vyzvednutí (restaurace, obchod)","example":"Národní 25, Praha 1"},"pickup_lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Pickup Lat","description":"GPS šířka místa vyzvednutí","example":50.0815},"pickup_lng":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Pickup Lng","description":"GPS délka místa vyzvednutí","example":14.4195},"delivery_address":{"type":"string","maxLength":200,"minLength":3,"title":"Delivery Address","description":"Adresa doručení k zákazníkovi","example":"Vinohradská 50, Praha 2"},"delivery_lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Delivery Lat","description":"GPS šířka místa doručení","example":50.0755},"delivery_lng":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Delivery Lng","description":"GPS délka místa doručení","example":14.4378},"is_vip":{"type":"boolean","title":"Is Vip","description":"VIP příznak objednávky.\n\n        VIP objednávky mají prioritu při přiřazování kurýra:\n        - Preferují se kurýři s tagem `vip`\n        - Pokud žádný VIP kurýr není k dispozici, přiřadí se běžný kurýr\n        ","default":false,"example":false},"required_tags":{"items":{"type":"string"},"type":"array","title":"Required Tags","description":"Seznam tagů, které musí mít kurýr pro tuto objednávku.\n\n        Běžné tagy:\n        - `fragile_ok` - objednávka obsahuje křehké zboží\n        - `fast` - expresní doručení\n        - `bike` / `car` - specifický typ dopravy\n\n        Kurýr MUSÍ mít VŠECHNY požadované tagy, aby mohl objednávku převzít.\n        ","default":[],"example":["fragile_ok"]},"id":{"type":"integer","title":"Id","description":"Unikátní identifikátor objednávky","example":42},"status":{"$ref":"#/components/schemas/OrderStatus","description":"Aktuální stav objednávky","example":"ASSIGNED"},"courier_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Courier Id","description":"ID přiřazeného kurýra (null pokud ještě není přiřazen)","example":5},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datum a čas vytvoření objednávky","example":"2024-01-15T12:00:00"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Datum a čas poslední změny stavu","example":"2024-01-15T12:05:00"}},"type":"object","required":["customer_name","customer_phone","pickup_address","pickup_lat","pickup_lng","delivery_address","delivery_lat","delivery_lng","id","status","created_at"],"title":"OrderResponse","description":"Kompletní odpověď s daty objednávky.\n\nVrací se při GET operacích a po vytvoření/aktualizaci objednávky.\n\n## Příklad odpovědi\n\n```json\n{\n    \"id\": 42,\n    \"customer_name\": \"Marie Svobodová\",\n    \"customer_phone\": \"+420606123456\",\n    \"pickup_address\": \"Národní 25, Praha 1\",\n    \"pickup_lat\": 50.0815,\n    \"pickup_lng\": 14.4195,\n    \"delivery_address\": \"Vinohradská 50, Praha 2\",\n    \"delivery_lat\": 50.0755,\n    \"delivery_lng\": 14.4378,\n    \"is_vip\": false,\n    \"required_tags\": [],\n    \"status\": \"ASSIGNED\",\n    \"courier_id\": 5,\n    \"created_at\": \"2024-01-15T12:00:00\",\n    \"updated_at\": \"2024-01-15T12:05:00\"\n}\n```","example":{"courier_id":5,"created_at":"2024-01-15T12:00:00","customer_name":"Marie Svobodová","customer_phone":"+420606123456","delivery_address":"Vinohradská 50, Praha 2","delivery_lat":50.0755,"delivery_lng":14.4378,"id":42,"is_vip":false,"pickup_address":"Národní 25, Praha 1","pickup_lat":50.0815,"pickup_lng":14.4195,"required_tags":[],"status":"ASSIGNED","updated_at":"2024-01-15T12:05:00"}},"OrderStatus":{"type":"string","enum":["CREATED","SEARCHING","ASSIGNED","PICKED","DELIVERED","CANCELLED"],"title":"OrderStatus","description":"Order lifecycle status."},"OrderStatusUpdate":{"properties":{"status":{"$ref":"#/components/schemas/OrderStatus","description":"Nový stav objednávky","example":"ASSIGNED"}},"type":"object","required":["status"],"title":"OrderStatusUpdate","description":"Schéma pro manuální změnu stavu objednávky.\n\n## Možné stavy\n\n| Stav | Popis | Následující stav |\n|------|-------|------------------|\n| `CREATED` | Nově vytvořená | SEARCHING |\n| `SEARCHING` | Hledá se kurýr | ASSIGNED |\n| `ASSIGNED` | Kurýr přiřazen | PICKED |\n| `PICKED` | Vyzvednuto | DELIVERED |\n| `DELIVERED` | Doručeno | - (konec) |\n| `CANCELLED` | Zrušeno | - (konec) |\n\n## Upozornění\n\nPro běžné operace používejte specifické endpointy:\n- `/orders/{id}/pickup` - pro označení vyzvednutí\n- `/orders/{id}/deliver` - pro označení doručení\n- `/orders/{id}/cancel` - pro zrušení\n\nTento endpoint je určen pro administrativní účely.","example":{"status":"ASSIGNED"}},"OrderWithCourier":{"properties":{"customer_name":{"type":"string","maxLength":100,"minLength":2,"title":"Customer Name","description":"Jméno zákazníka, který objednávku přijímá","example":"Marie Svobodová"},"customer_phone":{"type":"string","maxLength":20,"minLength":9,"title":"Customer Phone","description":"Telefonní číslo zákazníka pro kontakt při doručení","example":"+420606123456"},"pickup_address":{"type":"string","maxLength":200,"minLength":3,"title":"Pickup Address","description":"Adresa místa vyzvednutí (restaurace, obchod)","example":"Národní 25, Praha 1"},"pickup_lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Pickup Lat","description":"GPS šířka místa vyzvednutí","example":50.0815},"pickup_lng":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Pickup Lng","description":"GPS délka místa vyzvednutí","example":14.4195},"delivery_address":{"type":"string","maxLength":200,"minLength":3,"title":"Delivery Address","description":"Adresa doručení k zákazníkovi","example":"Vinohradská 50, Praha 2"},"delivery_lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Delivery Lat","description":"GPS šířka místa doručení","example":50.0755},"delivery_lng":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Delivery Lng","description":"GPS délka místa doručení","example":14.4378},"is_vip":{"type":"boolean","title":"Is Vip","description":"VIP příznak objednávky.\n\n        VIP objednávky mají prioritu při přiřazování kurýra:\n        - Preferují se kurýři s tagem `vip`\n        - Pokud žádný VIP kurýr není k dispozici, přiřadí se běžný kurýr\n        ","default":false,"example":false},"required_tags":{"items":{"type":"string"},"type":"array","title":"Required Tags","description":"Seznam tagů, které musí mít kurýr pro tuto objednávku.\n\n        Běžné tagy:\n        - `fragile_ok` - objednávka obsahuje křehké zboží\n        - `fast` - expresní doručení\n        - `bike` / `car` - specifický typ dopravy\n\n        Kurýr MUSÍ mít VŠECHNY požadované tagy, aby mohl objednávku převzít.\n        ","default":[],"example":["fragile_ok"]},"id":{"type":"integer","title":"Id","description":"Unikátní identifikátor objednávky","example":42},"status":{"$ref":"#/components/schemas/OrderStatus","description":"Aktuální stav objednávky","example":"ASSIGNED"},"courier_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Courier Id","description":"ID přiřazeného kurýra (null pokud ještě není přiřazen)","example":5},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datum a čas vytvoření objednávky","example":"2024-01-15T12:00:00"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Datum a čas poslední změny stavu","example":"2024-01-15T12:05:00"},"courier_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Courier Name","description":"Jméno přiřazeného kurýra (null pokud není přiřazen)","example":"Jan Novák"},"courier_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Courier Phone","description":"Telefon přiřazeného kurýra (null pokud není přiřazen)","example":"+420777123456"}},"type":"object","required":["customer_name","customer_phone","pickup_address","pickup_lat","pickup_lng","delivery_address","delivery_lat","delivery_lng","id","status","created_at"],"title":"OrderWithCourier","description":"Rozšířená odpověď s detaily přiřazeného kurýra.\n\nVrací se při GET jednotlivé objednávky (`/orders/{id}`).\nObsahuje navíc jméno a telefon kurýra pro snadnější zobrazení v UI.\n\n## Příklad odpovědi\n\n```json\n{\n    \"id\": 42,\n    \"customer_name\": \"Marie Svobodová\",\n    \"customer_phone\": \"+420606123456\",\n    \"pickup_address\": \"Národní 25, Praha 1\",\n    \"pickup_lat\": 50.0815,\n    \"pickup_lng\": 14.4195,\n    \"delivery_address\": \"Vinohradská 50, Praha 2\",\n    \"delivery_lat\": 50.0755,\n    \"delivery_lng\": 14.4378,\n    \"is_vip\": false,\n    \"required_tags\": [],\n    \"status\": \"ASSIGNED\",\n    \"courier_id\": 5,\n    \"courier_name\": \"Jan Novák\",\n    \"courier_phone\": \"+420777123456\",\n    \"created_at\": \"2024-01-15T12:00:00\",\n    \"updated_at\": \"2024-01-15T12:05:00\"\n}\n```","example":{"courier_id":5,"courier_name":"Jan Novák","courier_phone":"+420777123456","created_at":"2024-01-15T12:00:00","customer_name":"Marie Svobodová","customer_phone":"+420606123456","delivery_address":"Vinohradská 50, Praha 2","delivery_lat":50.0755,"delivery_lng":14.4378,"id":42,"is_vip":false,"pickup_address":"Národní 25, Praha 1","pickup_lat":50.0815,"pickup_lng":14.4195,"required_tags":[],"status":"ASSIGNED","updated_at":"2024-01-15T12:05:00"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}},"tags":[{"name":"couriers","description":"Správa kurýrů - vytváření, editace, lokace a stavy. Kurýr je osoba, která doručuje objednávky zákazníkům."},{"name":"orders","description":"Správa objednávek - vytváření, lifecycle a doručení. Objednávka představuje požadavek na doručení od místa vyzvednutí k zákazníkovi."},{"name":"dispatch","description":"Dispečink - přiřazování kurýrů k objednávkám. Automatické i manuální přiřazení s logováním historie."},{"name":"Formuláře","description":"CRUD operace nad formuláři - vytváření, čtení, mazání záznamů. Obsahuje easter egg mini hru."},{"name":"Přílohy","description":"Nahrávání a správa souborových příloh k formulářům. Podporuje PDF a TXT, max 1 MB."},{"name":"Instrukce","description":"Textové instrukce k formulářům - vytvoření, aktualizace, čtení."},{"name":"Mini hra","description":"Easter egg funkce - vyhodnocení tajných jmen (neo, trinity, morpheus, jan, pavla, matrix)."}]}